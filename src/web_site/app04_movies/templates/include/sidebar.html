{% load movie_tag %}

<div class="search-bar w3layouts-newsletter">
    <h3 class="sear-head editContent" >Поиск фильма</h3>
    <form action="{% url 'search-link' %}" method="get" class="d-flex editContent" >
        <input type="search" placeholder="Введите название..." name="search" class="form-control" required="">
        <button type="submit" class="btn1 btn" ><span class="fa fa-search" aria-hidden="true" ></span></button>
    </form>
</div>
<!--preference -->

{# Блоки div с годами и жанрами оборачиваем в форму чтобы реализовать фильтрацию #}
{# И в импуты добавим name="year" и "genre" по которsv будет во вьюхе ловить список в GET запросе #}
{# И value="" для передачи списка выбраных годов и жанров. И добавим кнопку submit #}
{# Для добавления json изменили url и присвоил форме name="filter" #}
<form id="form_id" action="{% url 'filter-link' %}" method="get" name="filter">
    <div class="left-side my-4">
        <h3 class="sear-head editContent" >Жанры</h3>
        <ul class="w3layouts-box-list">

    {# Тут мы обращаемся к наследованному классу GenreYear и его функции get_genres вытаскиваем жанры #}
            {% for genre in view.get_genres %}
            <li class="editContent" >
                <label>
                    <input type="checkbox" class="checked" name="genre" value="{{ genre.id }}" {# onclick="document.getElementById('sub_btn').click();"#}>
                </label>
                <span class="span editContent" >{{ genre.name }}</span>
            </li>
            {% endfor %}

        </ul>
    </div>

<!-- // preference -->
<!-- discounts -->

    <div class="left-side">
        <h3 class="sear-head editContent" >Год</h3>
        <ul class="w3layouts-box-list">

{# Мы использовали .value в классе GenreYear просто для примера его существования #}
{#        и использования, и если в таком случае просто указать {{ year }} #}
{# получим словарь, поэтому ещё раз обращаемся к столбцу year {{ year.year }} #}
{#        по сути .value можно удалить и всё так же будет работать так как мы всё #}
{#        равно обратились к столбцу здесь #}

            {% for year in view.get_years %}
            <li class="editContent" >
                <label>
                    <input type="checkbox" class="checked" name="year" value="{{ year.year }}" {# onclick="document.getElementById('sub_btn').click();"#}>
                </label>
                <span class="span editContent" >{{ year.year }}</span>
            </li>
            {% endfor %}

        </ul>
    </div>

    <button id="sub_btn" type="submit">Найти</button>

</form>
<!-- //discounts -->



<!-- reviews -->
<div class="customer-rev left-side my-4">
    <h3 class="sear-head editContent" >Рейтинг</h3>
    <ul class="w3layouts-box-list">
        <li>
            <a href="#">
                <span class="fa fa-star" aria-hidden="true" ></span>
                <span class="fa fa-star" aria-hidden="true" ></span>
                <span class="fa fa-star" aria-hidden="true" ></span>
                <span class="fa fa-star" aria-hidden="true" ></span>
                <span class="fa fa-star" aria-hidden="true" ></span>
                <span class="editContent" >5.0</span>
            </a>
        </li>
        <li>
            <a href="#">
                <span class="fa fa-star" aria-hidden="true" ></span>
                <span class="fa fa-star" aria-hidden="true" ></span>
                <span class="fa fa-star" aria-hidden="true" ></span>
                <span class="fa fa-star" aria-hidden="true" ></span>
                <span class="fa fa-star-o" aria-hidden="true" ></span>
                <span class="editContent" >4.0</span>
            </a>
        </li>
        <li>
            <a href="#">
                <span class="fa fa-star" aria-hidden="true" ></span>
                <span class="fa fa-star" aria-hidden="true" ></span>
                <span class="fa fa-star" aria-hidden="true" ></span>
                <span class="fa fa-star-half-o" aria-hidden="true" ></span>
                <span class="fa fa-star-o" aria-hidden="true" ></span>
                <span class="editContent" >3.5</span>
            </a>
        </li>
        <li>
            <a href="#">
                <span class="fa fa-star" aria-hidden="true" ></span>
                <span class="fa fa-star" aria-hidden="true" ></span>
                <span class="fa fa-star" aria-hidden="true"></span>
                <span class="fa fa-star-o" aria-hidden="true" ></span>
                <span class="fa fa-star-o" aria-hidden="true" ></span>
                <span class="editContent" >3.0</span>
            </a>
        </li>
        <li>
            <a href="#">
                <span class="fa fa-star" aria-hidden="true"></span>
                <span class="fa fa-star" aria-hidden="true" ></span>
                <span class="fa fa-star-half-o" aria-hidden="true" ></span>
                <span class="fa fa-star-o" aria-hidden="true" ></span>
                <span class="fa fa-star-o" aria-hidden="true" ></span>
                <span class="editContent" >2.5</span>
            </a>
        </li>
    </ul>
</div>
{# Можно передать аргумент в теплэйт тэг наример count=3 и он подставится в срез списка #}
{% get_last_movies count=3 %}



